<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #f8fafc; margin: 0; font-family: ui-sans-serif, system-ui, sans-serif; transition: background-color 0.3s; }
        .nav-item-active { background-color: var(--primary-color, #4f46e5); color: white !important; }
        .btn-primary { background-color: var(--primary-color, #4f46e5); }
        .text-primary { color: var(--primary-color, #4f46e5); }
        .animate-fade { animation: fadeIn 0.4s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="app-root"></div>

    <script>
        // --- DADOS ---
        let users = [{ id: 1, name: 'João Silva', email: 'joao@exemplo.com', password: '123' }];
        let activeTab = 'login';
        let currentUser = null;
        let isRegistering = false;
        
        // Configurações do Sistema
        let settings = {
            orgName: 'CBEM',
            primaryColor: '#4f46e5',
            welcomeMsg: 'Bem-vindo ao sistema Caminho do Bem.'
        };

        // --- MOTOR DE RENDERIZAÇÃO ---
        function render() {
            const root = document.getElementById('app-root');
            document.documentElement.style.setProperty('--primary-color', settings.primaryColor);

            if (activeTab === 'login') {
                root.innerHTML = `
                <div class="flex items-center justify-center min-h-screen bg-slate-50 p-6">
                    <div class="bg-white p-10 rounded-[2.5rem] shadow-2xl border w-full max-w-md animate-fade">
                        ${isRegistering ? `
                            <h2 class="text-2xl font-black mb-6">Nova Conta</h2>
                            <form onsubmit="handleReg(event)" class="space-y-4">
                                <input type="text" id="r-name" placeholder="Nome" required class="w-full p-4 bg-slate-50 rounded-xl outline-none border focus:border-indigo-500">
                                <input type="email" id="r-email" placeholder="Email" required class="w-full p-4 bg-slate-50 rounded-xl outline-none border focus:border-indigo-500">
                                <input type="password" id="r-pass" placeholder="Senha" required class="w-full p-4 bg-slate-50 rounded-xl outline-none border focus:border-indigo-500">
                                <button type="submit" class="w-full btn-primary text-white font-bold py-4 rounded-xl">Criar Conta</button>
                            </form>
                            <button onclick="isRegistering=false;render()" class="mt-4 text-sm text-gray-400 w-full">Voltar</button>
                        ` : `
                            <div class="w-16 h-16 btn-primary rounded-2xl flex items-center justify-center text-white mx-auto mb-6"><i data-lucide="lock"></i></div>
                            <h2 class="text-2xl font-black mb-8 text-center">Login</h2>
                            <form onsubmit="handleLogin(event)" class="space-y-4">
                                <input type="email" id="l-email" placeholder="joao@exemplo.com" required class="w-full p-4 bg-slate-50 rounded-xl outline-none border focus:border-indigo-500">
                                <input type="password" id="l-pass" placeholder="Senha (123)" required class="w-full p-4 bg-slate-50 rounded-xl outline-none border focus:border-indigo-500">
                                <button type="submit" class="w-full btn-primary text-white font-bold py-4 rounded-xl hover:opacity-90 transition-all">Entrar</button>
                            </form>
                            <button onclick="isRegistering=true;render()" class="mt-6 text-primary font-bold text-sm w-full">Criar conta</button>
                        `}
                    </div>
                </div>`;
            } else {
                root.innerHTML = `
                <div class="flex h-screen overflow-hidden">
                    <aside class="w-64 bg-white border-r p-6 flex flex-col">
                        <div class="flex items-center gap-3 mb-10">
                            <div class="w-10 h-10 btn-primary rounded-xl flex items-center justify-center text-white"><i data-lucide="heart"></i></div>
                            <span class="font-black text-xl tracking-tighter">${settings.orgName}</span>
                        </div>
                        <nav class="flex-1 space-y-2">
                            <div onclick="activeTab='inicio';render()" class="flex items-center gap-3 p-4 rounded-xl cursor-pointer font-bold ${activeTab==='inicio'?'nav-item-active text-white':'text-gray-500 hover:bg-gray-50'}">
                                <i data-lucide="layout-dashboard"></i><span>Início</span>
                            </div>
                            <div onclick="activeTab='membros';render()" class="flex items-center gap-3 p-4 rounded-xl cursor-pointer font-bold ${activeTab==='membros'?'nav-item-active text-white':'text-gray-500 hover:bg-gray-50'}">
                                <i data-lucide="users"></i><span>Membros</span>
                            </div>
                            <div onclick="activeTab='configuracoes';render()" class="flex items-center gap-3 p-4 rounded-xl cursor-pointer font-bold ${activeTab==='configuracoes'?'nav-item-active text-white':'text-gray-500 hover:bg-gray-50'}">
                                <i data-lucide="settings"></i><span>Definições</span>
                            </div>
                        </nav>
                        <button onclick="currentUser=null;activeTab='login';render()" class="text-red-500 font-bold p-4 hover:bg-red-50 rounded-xl flex items-center gap-3">
                            <i data-lucide="log-out"></i><span>Sair</span>
                        </button>
                    </aside>
                    <main class="flex-1 p-10 overflow-y-auto bg-slate-50" id="main-content"></main>
                </div>`;
                
                const main = document.getElementById('main-content');
                
                if (activeTab === 'inicio') {
                    main.innerHTML = `
                    <div class="animate-fade space-y-8">
                        <div class="btn-primary p-12 rounded-[2.5rem] text-white shadow-xl">
                            <h2 class="text-3xl font-black mb-2">Olá, ${currentUser.name}!</h2>
                            <p class="opacity-80">${settings.welcomeMsg}</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white p-8 rounded-2xl border shadow-sm text-center">
                                <p class="text-gray-400 text-xs font-bold uppercase mb-2">Total Membros</p>
                                <p class="text-4xl font-black">${users.length}</p>
                            </div>
                        </div>
                    </div>`;
                } else if (activeTab === 'membros') {
                    main.innerHTML = `
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade">
                        <div class="bg-white p-8 rounded-3xl border shadow-sm lg:col-span-1">
                            <h2 class="text-xl font-black mb-6">Novo Membro</h2>
                            <form onsubmit="addMem(event)" class="space-y-4">
                                <input id="m-name" placeholder="Nome" required class="w-full p-3 bg-gray-50 rounded-xl outline-none border focus:border-indigo-500">
                                <input id="m-email" placeholder="Email" required class="w-full p-3 bg-gray-50 rounded-xl outline-none border focus:border-indigo-500">
                                <button class="w-full btn-primary text-white font-bold py-3 rounded-xl shadow-lg">Salvar</button>
                            </form>
                        </div>
                        <div class="lg:col-span-2 space-y-4">
                            ${users.map(u => `
                                <div class="bg-white p-5 rounded-2xl border flex items-center justify-between hover:shadow-md transition-all">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 rounded-xl bg-slate-50 text-primary flex items-center justify-center font-black">${u.name[0]}</div>
                                        <div><p class="font-black text-gray-800">${u.name}</p><p class="text-xs text-gray-400">${u.email}</p></div>
                                    </div>
                                    <button onclick="delMem(${u.id})" class="text-gray-300 hover:text-red-500 transition-colors"><i data-lucide="trash-2"></i></button>
                                </div>
                            `).join('')}
                        </div>
                    </div>`;
                } else if (activeTab === 'configuracoes') {
                    main.innerHTML = `
                    <div class="max-w-2xl animate-fade">
                        <h2 class="text-3xl font-black mb-8">Definições do Sistema</h2>
                        <div class="bg-white p-8 rounded-3xl border shadow-sm space-y-6">
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-500 uppercase">Nome da Organização</label>
                                <input type="text" id="set-org" value="${settings.orgName}" class="w-full p-4 bg-slate-50 rounded-xl border outline-none focus:border-indigo-500">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-500 uppercase">Mensagem de Boas-vindas</label>
                                <input type="text" id="set-msg" value="${settings.welcomeMsg}" class="w-full p-4 bg-slate-50 rounded-xl border outline-none focus:border-indigo-500">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-gray-500 uppercase">Cor do Tema</label>
                                <div class="flex gap-4">
                                    <input type="color" id="set-color" value="${settings.primaryColor}" class="h-14 w-20 rounded-lg cursor-pointer border-none bg-transparent">
                                    <span class="self-center text-sm text-gray-400">Escolha a cor principal da interface</span>
                                </div>
                            </div>
                            <button onclick="saveSettings()" class="w-full btn-primary text-white font-bold py-4 rounded-xl shadow-lg transition-transform active:scale-95">Guardar Alterações</button>
                        </div>
                    </div>`;
                }
            }
            lucide.createIcons();
        }

        // --- LÓGICA ---
        window.handleLogin = (e) => {
            e.preventDefault();
            const u = users.find(x => x.email === document.getElementById('l-email').value && x.password === document.getElementById('l-pass').value);
            if (u) { currentUser = u; activeTab = 'inicio'; render(); } 
            else { alert('Email ou senha incorretos!'); }
        };

        window.handleReg = (e) => {
            e.preventDefault();
            users.push({ id: Date.now(), name: document.getElementById('r-name').value, email: document.getElementById('r-email').value, password: document.getElementById('r-pass').value });
            isRegistering = false; render();
        };

        window.addMem = (e) => {
            e.preventDefault();
            users.push({ id: Date.now(), name: document.getElementById('m-name').value, email: document.getElementById('m-email').value, password: '123' });
            render();
        };

        window.delMem = (id) => { users = users.filter(x => x.id !== id); render(); };

        window.saveSettings = () => {
            settings.orgName = document.getElementById('set-org').value;
            settings.welcomeMsg = document.getElementById('set-msg').value;
            settings.primaryColor = document.getElementById('set-color').value;
            render();
            alert('Configurações aplicadas!');
        };

        // Iniciar
        render();
    </script>
</body>
</html>
